---
import TaskTablePreview from "./TaskTablePreview.astro"
---

<div class="relative w-full mx-auto">
  <!-- Single container with outer border -->
  <div
    class="rounded-lg overflow-hidden border border-zinc-700 bg-[#0a0a0a] shadow-2xl mockup-container antialiased"
  >
    <div class="editor-layout">
      <!-- Markdown Editor Panel -->
      <div class="markdown-panel">
        <!-- Tab Bar -->
        <div
          class="tab-bar flex items-center bg-[#0a0a0a] border-b border-zinc-800"
        >
          <button
            class="editor-tab active flex items-center gap-2 px-3 py-2 text-xs font-medium cursor-pointer transition-colors"
            data-tab="skills"
          >
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="tab-icon"
            >
              <path
                d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
              ></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
            <span class="tab-filename">ship-faster.md</span>
          </button>
          <button
            class="editor-tab flex items-center gap-2 px-3 py-2 text-xs font-medium cursor-pointer transition-colors"
            data-tab="claude"
          >
            <svg
              width="14"
              height="14"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="tab-icon"
            >
              <path
                d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
              ></path>
              <polyline points="14 2 14 8 20 8"></polyline>
            </svg>
            <span class="tab-filename">CLAUDE.md</span>
          </button>
        </div>

        <!-- Tab Content: Ship Faster -->
        <div class="tab-content active" data-content="skills">
          <div class="markdown-content p-5 flex-1 text-zinc-200">
            <h1 class="text-white font-semibold text-3xl mb-2">ship faster</h1>

            <p class="leading-7 mt-2 text-sm">
              write markdown plans.<br />explain code with diagrams.
            </p>

            <!-- Flowchart -->
            <div class="mt-6">
              <div
                class="flex items-center justify-end px-3 py-1 bg-[#121212] border border-zinc-700 rounded-t"
              >
                <span class="text-zinc-400 text-xs font-mono">mermaid</span>
              </div>

              <div
                class="mermaid-preview p-3 bg-[#0a0a0a] rounded-b border border-t-0 border-zinc-700"
              >
                <div
                  class="mermaid-diagram flex flex-col items-center gap-1 text-xs font-mono"
                >
                  <div
                    class="px-3 py-1 bg-[#0a0a0a] border border-zinc-600 rounded text-white"
                  >
                    research
                  </div>
                  <div class="w-px h-2 bg-zinc-600"></div>
                  <div
                    class="px-3 py-1 bg-[#0a0a0a] border border-zinc-600 rounded text-white"
                  >
                    plan
                  </div>
                  <div class="w-px h-2 bg-zinc-600"></div>
                  <div
                    class="px-3 py-1 bg-emerald-500/20 border border-emerald-500/40 rounded text-emerald-400"
                  >
                    implement
                  </div>
                </div>
              </div>
            </div>

            <!-- Checklist -->
            <div class="mt-6 space-y-2 text-sm">
              <div class="checklist-item checked">
                <span class="checkbox"></span>
                <span>write specs, not code</span>
              </div>
              <div class="checklist-item checked">
                <span class="checkbox"></span>
                <span>track progress visually</span>
              </div>
              <div class="checklist-item">
                <span class="checkbox"></span>
                <span>ship faster</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Tab Content: CLAUDE.md -->
        <div class="tab-content" data-content="claude">
          <div class="markdown-content p-5 flex-1 text-zinc-200">
            <h1 class="text-white font-semibold text-3xl mb-2">your rules</h1>

            <p class="leading-7 mt-2 text-sm">
              define your stack.<br />own your conventions.
            </p>

            <!-- JSON Code Block (using mermaid-preview for consistent height) -->
            <div class="mt-6">
              <div
                class="flex items-center justify-end px-3 py-1 bg-[#121212] border border-zinc-700 rounded-t"
              >
                <span class="text-zinc-400 text-xs font-mono">json</span>
              </div>

              <div
                class="mermaid-preview p-3 bg-[#0a0a0a] rounded-b border border-t-0 border-zinc-700"
              >
                <div
                  class="mermaid-diagram flex flex-col items-center gap-1 text-xs font-mono"
                >
                  <div
                    class="px-3 py-1 bg-[#0a0a0a] border border-zinc-600 rounded text-emerald-400"
                  >
                    "stack": "next.js"
                  </div>
                  <div class="w-px h-2 bg-zinc-600"></div>
                  <div
                    class="px-3 py-1 bg-[#0a0a0a] border border-zinc-600 rounded text-emerald-400"
                  >
                    "style": "functional"
                  </div>
                  <div class="w-px h-2 bg-zinc-600"></div>
                  <div
                    class="px-3 py-1 bg-[#0a0a0a] border border-zinc-600 rounded text-emerald-400"
                  >
                    "tests": "vitest"
                  </div>
                </div>
              </div>
            </div>

            <!-- Inline code rules -->
            <div class="mt-6 space-y-2 text-sm">
              <div class="flex items-center gap-2">
                <span class="text-zinc-500">‚Ä¢</span>
                <span class="text-zinc-300">write pure functions</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="text-zinc-500">‚Ä¢</span>
                <span class="text-zinc-300">test everything</span>
              </div>
              <div class="flex items-center gap-2">
                <span class="text-zinc-500">‚Ä¢</span>
                <span class="text-zinc-300">make no mistakes</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Terminal Panel -->
      <div class="terminal-panel">
        <div
          class="toolbar-row flex items-center justify-between px-4 bg-[#0a0a0a] border-b border-zinc-800"
        >
          <div class="dock-tabs flex items-center gap-1">
            <button
              class="dock-tab active"
              data-dock="terminal"
              title="terminal"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                ><polyline points="4 17 10 11 4 5"></polyline><line
                  x1="12"
                  y1="19"
                  x2="20"
                  y2="19"></line></svg
              >
            </button>
            <button class="dock-tab" data-dock="git" title="git">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                ><line x1="6" y1="3" x2="6" y2="15"></line><circle
                  cx="18"
                  cy="6"
                  r="3"></circle><circle cx="6" cy="18" r="3"></circle><path
                  d="M18 9a9 9 0 0 1-9 9"></path></svg
              >
            </button>
          </div>
          <div class="dock-badges active" data-dock-badges="terminal">
            <div
              class="toolbar-badge toolbar-badge-secondary flex items-center border border-zinc-700/50 rounded px-2 py-0.5"
            >
              <span class="text-zinc-400 text-xs font-mono whitespace-nowrap"
                >üß† 67%</span
              >
            </div>

            <div
              class="toolbar-badge toolbar-badge-secondary flex items-center border border-zinc-700/50 rounded px-2 py-0.5"
            >
              <span class="text-zinc-400 text-xs font-mono whitespace-nowrap"
                >üí∞ $4.20</span
              >
            </div>

            <div
              class="toolbar-badge toolbar-badge-primary flex items-center gap-1.5 bg-emerald-500/15 border border-emerald-500/25 rounded px-2 py-0.5"
            >
              <div
                class="w-1.5 h-1.5 rounded-full bg-emerald-400 flex-shrink-0"
              >
              </div>
              <span class="text-emerald-400 text-xs font-mono whitespace-nowrap"
                >Opus 4.5</span
              >
            </div>
          </div>

          <div class="dock-badges" data-dock-badges="git">
            <div
              class="toolbar-badge toolbar-badge-primary flex items-center gap-1.5 border border-zinc-700/50 rounded px-2 py-0.5"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="12"
                height="12"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="text-zinc-400"
                ><line x1="6" y1="3" x2="6" y2="15"></line><circle
                  cx="18"
                  cy="6"
                  r="3"></circle><circle cx="6" cy="18" r="3"></circle><path
                  d="M18 9a9 9 0 0 1-9 9"></path></svg
              >
              <span class="text-zinc-400 text-xs font-mono whitespace-nowrap"
                >main</span
              >
            </div>
          </div>
        </div>

        <div class="dock-content active" data-dock-content="terminal">
          <div class="p-4 text-xs space-y-3 font-jetbrains flex-1 bg-[#0a0a0a]">
            <div class="border border-orange-500 rounded p-3 space-y-2">
              <div class="text-orange-400 border-b border-orange-900 pb-2">
                ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ Claude Code ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
              </div>
              <div class="space-y-1 text-zinc-300">
                <div class="text-white font-medium">Welcome back Taylor!</div>
                <div class="flex items-center gap-2">
                  <div class="text-orange-400 text-base">ü¶Ä</div>
                  <div class="text-xs text-zinc-500">Opus 4.5 ¬∑ Claude Pro</div>
                </div>
                <div class="text-xs text-zinc-500 terminal-path-text">
                  <span class="block truncate"
                    >taylor@spacecake.ai's Organization</span
                  >
                  <span class="block truncate"
                    >~/Documents/GitHub/spacecake/</span
                  >
                </div>
              </div>
              <div class="border-t border-orange-900 pt-2 space-y-1">
                <div class="text-emerald-400 text-xs font-medium">
                  Tips for getting started
                </div>
                <div class="text-zinc-500 text-xs">
                  Run ./init to create a CLAUDE.md file with instructions for
                  Claude
                </div>
                <div class="text-xs mt-2">
                  <span class="text-orange-400">Recent activity</span>
                  <div class="text-zinc-600">No recent activity</div>
                </div>
              </div>
            </div>

            <!-- Terminal Prompt with Typing Animation -->
            <div class="flex items-center gap-2 text-zinc-400">
              <span class="text-purple-400 font-bold">‚ùØ</span>
              <span class="text-orange-400">‚ñ†</span>
              <span class="text-zinc-400" id="terminal-text"></span>
              <span
                class="inline-block w-2 h-4 bg-white opacity-100"
                id="terminal-cursor"></span>
            </div>

            <div class="text-zinc-600 text-xs pt-2">? for shortcuts</div>
          </div>
        </div>

        <div class="dock-content" data-dock-content="git">
          <div class="git-panel-mockup font-jetbrains">
            <!-- left: commits pane -->
            <div class="git-commits-pane">
              <div class="git-pane-header">commits</div>
              <div class="git-pane-body">
                <div class="git-commit-item selected">
                  <div class="git-commit-row">
                    <span class="git-dot git-dot-yellow"></span>
                    <span class="git-commit-label">working tree</span>
                  </div>
                </div>
                <div class="git-commit-item">
                  <div class="git-commit-row">
                    <span class="git-commit-hash">a1b2c3f</span>
                    <span class="git-commit-date">Feb 14</span>
                  </div>
                  <div class="git-commit-msg">add task checklist</div>
                </div>
                <div class="git-commit-item">
                  <div class="git-commit-row">
                    <span class="git-commit-hash">8f2e1d4</span>
                    <span class="git-commit-date">Feb 13</span>
                  </div>
                  <div class="git-commit-msg">add mermaid flowchart</div>
                </div>
                <div class="git-commit-item">
                  <div class="git-commit-row">
                    <span class="git-commit-hash">c7d9e2a</span>
                    <span class="git-commit-date">Feb 12</span>
                  </div>
                  <div class="git-commit-msg">create project plan</div>
                </div>
              </div>
            </div>

            <!-- right: changed files pane -->
            <div class="git-files-pane">
              <div class="git-pane-header">changed files</div>
              <div class="git-pane-body">
                <div class="git-section">
                  <div class="git-section-header">
                    <svg
                      width="10"
                      height="10"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      ><polyline points="6 9 12 15 18 9"></polyline></svg
                    >
                    <span>staged changes</span>
                    <span class="git-count-badge git-count-green">1</span>
                  </div>
                  <div class="git-section-files">
                    <div class="git-file-item">
                      <svg
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="git-file-icon"
                        ><path
                          d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                        ></path><polyline points="14 2 14 8 20 8"
                        ></polyline></svg
                      >
                      <span class="git-file-path">ship-faster.md</span>
                      <span class="git-status-badge git-status-green">A</span>
                    </div>
                  </div>
                </div>
                <div class="git-section">
                  <div class="git-section-header">
                    <svg
                      width="10"
                      height="10"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      ><polyline points="6 9 12 15 18 9"></polyline></svg
                    >
                    <span>changes</span>
                    <span class="git-count-badge">2</span>
                  </div>
                  <div class="git-section-files">
                    <div class="git-file-item">
                      <svg
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="git-file-icon"
                        ><path
                          d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                        ></path><polyline points="14 2 14 8 20 8"
                        ></polyline></svg
                      >
                      <span class="git-file-path">CLAUDE.md</span>
                      <span class="git-status-badge git-status-yellow">M</span>
                    </div>
                    <div class="git-file-item">
                      <svg
                        width="12"
                        height="12"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="1.5"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="git-file-icon"
                        ><path
                          d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
                        ></path><polyline points="14 2 14 8 20 8"
                        ></polyline></svg
                      >
                      <span class="git-file-path">notes.md</span>
                      <span class="git-status-badge git-status-blue">U</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Task Table - Desktop Only -->
    <div class="task-panel-desktop">
      <TaskTablePreview embedded />
    </div>
  </div>
</div>

<style>
  /* Task panel - hidden on mobile, shown on desktop */
  .task-panel-desktop {
    display: none;
    border-top: 1px solid #3f3f46; /* zinc-700 */
  }

  @media (min-width: 550px) {
    .task-panel-desktop {
      display: block;
    }
  }

  /* Side-by-side layout for markdown and terminal panels */
  .editor-layout {
    display: flex;
    flex-direction: column;
  }

  .markdown-panel,
  .terminal-panel {
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .markdown-panel {
    border-bottom: 1px solid #3f3f46; /* zinc-700 */
  }

  /* Content areas fill available space */
  .markdown-content {
    background: #0a0a0a;
    flex: 1;
    min-height: 0;
  }

  /* Fixed height container for tab content to prevent size changes */
  .tab-content.active {
    min-height: 320px;
  }

  /* Toolbar rows must be exactly the same height */
  .toolbar-row {
    height: 32px;
    display: flex;
    align-items: center;
    flex-shrink: 0;
  }

  @media (min-width: 550px) {
    .editor-layout {
      flex-direction: row;
      align-items: stretch;
    }

    .editor-layout > * {
      flex: 1;
      min-width: 0;
    }

    .markdown-panel {
      border-bottom: none;
      border-right: 1px solid #3f3f46; /* zinc-700 */
    }

    /* Ensure both panels have equal height */
    .markdown-panel,
    .terminal-panel {
      display: flex;
      flex-direction: column;
    }
  }

  /* Override Starlight typography styles */
  .mockup-container {
    font-family: var(--sl-font);
    line-height: 1.5 !important;
  }

  .mockup-container h1 {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.2 !important;
  }

  .mockup-container h2 {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.3 !important;
  }

  .mockup-container p {
    margin: 0 !important;
    padding: 0 !important;
    line-height: 1.5 !important;
  }

  /* Force code block text to stay light in both themes */
  .mockup-container .code-content {
    color: #e4e4e7 !important; /* zinc-200 */
    white-space: nowrap;
    overflow-x: hidden;
  }

  .mockup-container .code-content .flex {
    flex-wrap: nowrap;
  }

  .mockup-container .code-content .select-none {
    flex-shrink: 0;
  }

  /* Force Tailwind spacing utilities to work */
  .mockup-container .space-y-3 > * + * {
    margin-top: 0.75rem !important;
  }

  .mockup-container .space-y-2 > * + * {
    margin-top: 0.5rem !important;
  }

  .mockup-container .space-y-1 > * + * {
    margin-top: 0.25rem !important;
  }

  .mockup-container .mt-6 {
    margin-top: 1.5rem !important;
  }

  .mockup-container .mt-3 {
    margin-top: 0.75rem !important;
  }

  .mockup-container .mt-2 {
    margin-top: 0.5rem !important;
  }

  .mockup-container .pb-2 {
    padding-bottom: 0.5rem !important;
  }

  .mockup-container .pt-2 {
    padding-top: 0.5rem !important;
  }

  .font-mono {
    font-family: var(--sl-font-mono) !important;
  }

  .font-jetbrains {
    font-family: var(--sl-font-jetbrains) !important;
  }

  .typescript-btn {
    font-family: var(--sl-font-mono) !important;
    font-size: 11px !important;
    line-height: 1 !important;
    padding: 3px 8px !important;
  }

  .toolbar-badges {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: nowrap;
    flex-shrink: 0;
  }

  .toolbar-badge {
    flex-shrink: 0;
    white-space: nowrap;
  }

  /* Hide secondary badges at narrow widths */
  @media (max-width: 1600px) {
    .toolbar-badge-secondary {
      display: none;
    }
  }

  /* Terminal panel text truncation */
  .terminal-path-text {
    min-width: 0;
    overflow: hidden;
  }

  .terminal-path-text .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  .terminal-path-text .block {
    display: block;
  }

  /* Tab bar styling */
  .tab-bar {
    height: 32px;
    border-bottom: 1px solid #27272a; /* zinc-800 */
    flex-shrink: 0;
  }

  .editor-tab {
    height: 100%;
    background: transparent;
    color: #71717a; /* zinc-500 */
    border: none;
    border-bottom: 2px solid transparent;
    margin-bottom: -1px;
  }

  .editor-tab:hover {
    color: #a1a1aa; /* zinc-400 */
    background: rgba(63, 63, 70, 0.3); /* zinc-700/30 */
  }

  .editor-tab.active {
    color: #e4e4e7; /* zinc-200 */
    background: #0a0a0a;
    border-bottom: 2px solid oklch(0.6963 0.0866 40.28); /* brand color */
  }

  .editor-tab .tab-icon {
    opacity: 0.6;
  }

  .editor-tab.active .tab-icon {
    opacity: 1;
    color: oklch(0.6963 0.0866 40.28); /* brand color */
  }

  .tab-filename {
    white-space: nowrap;
  }

  .editor-tab {
    font-family: var(--sl-font-mono) !important;
    font-size: 0.75rem !important; /* text-xs to match badges */
    padding: 6px 10px !important;
  }

  .editor-tab svg {
    width: 11px;
    height: 11px;
  }

  /* Tab content visibility */
  .tab-content {
    display: none;
  }

  .tab-content.active {
    display: flex;
    flex-direction: column;
    flex: 1;
  }

  /* Mermaid diagram styling */
  .mermaid-preview {
    min-height: 100px;
  }

  .mermaid-diagram {
    font-family: var(--sl-font-mono);
  }

  /* Checklist styling */
  .checklist-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding-left: 0.5rem;
    cursor: pointer;
    user-select: none;
  }

  .checklist-item .checkbox {
    width: 1rem;
    height: 1rem;
    border-radius: 4px;
    border: 1px solid #3f3f46;
    background: rgba(63, 63, 70, 0.3);
    flex-shrink: 0;
  }

  .checklist-item.checked .checkbox {
    background: rgb(16 185 129 / 0.2); /* emerald-500/20 */
    border-color: rgb(16 185 129 / 0.4); /* emerald-500/40 */
    position: relative;
  }

  .checklist-item.checked .checkbox::after {
    content: "‚úì";
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: rgb(52 211 153); /* emerald-400 */
    font-size: 0.65rem;
    font-weight: bold;
  }

  .checklist-item.checked span:last-child {
    color: #71717a;
  }

  /* Dock switcher tabs */
  .dock-tabs {
    flex-shrink: 0;
  }

  .dock-tab {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 24px;
    border: none;
    border-radius: 4px;
    background: transparent;
    color: #71717a; /* zinc-500 */
    cursor: pointer;
    transition:
      color 0.15s,
      background 0.15s;
    padding: 0;
  }

  .dock-tab:hover {
    color: #a1a1aa; /* zinc-400 */
    background: rgba(63, 63, 70, 0.3);
  }

  .dock-tab.active {
    color: #34d399; /* emerald-400 */
    background: rgba(16, 185, 129, 0.1);
  }

  /* Dock badges show/hide */
  .dock-badges {
    display: none;
    align-items: center;
    gap: 0.5rem;
    flex-wrap: nowrap;
    flex-shrink: 0;
  }

  .dock-badges.active {
    display: flex;
  }

  /* Dock content show/hide */
  .dock-content {
    display: none;
    flex-direction: column;
    flex: 1;
    min-height: 0;
  }

  .dock-content.active {
    display: flex;
  }

  /* Git panel mockup */
  .git-panel-mockup {
    display: flex;
    flex: 1;
    background: #0a0a0a;
    font-size: 0.75rem;
    min-height: 0;
  }

  .git-commits-pane {
    display: flex;
    flex-direction: column;
    width: 40%;
    border-right: 1px solid #27272a;
    min-width: 0;
  }

  .git-files-pane {
    display: flex;
    flex-direction: column;
    width: 60%;
    min-width: 0;
  }

  .git-pane-header {
    padding: 6px 12px;
    color: #71717a;
    font-size: 0.65rem;
    text-transform: lowercase;
    letter-spacing: 0.03em;
    border-bottom: 1px solid #27272a;
    flex-shrink: 0;
  }

  .git-pane-body {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
  }

  /* Commit items */
  .git-commit-item {
    padding: 6px 12px;
    border-bottom: 1px solid #1a1a1e;
    cursor: default;
  }

  .git-commit-item:hover {
    background: rgba(63, 63, 70, 0.15);
  }

  .git-commit-item.selected {
    background: rgba(16, 185, 129, 0.08);
  }

  .git-commit-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }

  .git-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .git-dot-yellow {
    background: #eab308; /* yellow-500 */
  }

  .git-commit-label {
    color: #e4e4e7;
    font-weight: 500;
    flex: 1;
    min-width: 0;
  }

  .git-commit-hash {
    color: #52525b; /* zinc-600 */
    font-family: var(--sl-font-mono) !important;
  }

  .git-commit-date {
    color: #52525b;
    font-size: 0.65rem;
    flex-shrink: 0;
  }

  .git-commit-msg {
    color: #a1a1aa;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-top: 2px;
  }

  /* File sections */
  .git-section {
    border-bottom: 1px solid #1a1a1e;
  }

  .git-section-header {
    display: flex !important;
    align-items: center;
    gap: 6px;
    padding: 6px 10px;
    color: #a1a1aa;
    font-size: 0.7rem;
    font-weight: 500;
    cursor: default;
  }

  .git-section-header svg {
    color: #52525b;
    flex-shrink: 0;
  }

  .git-count-badge {
    margin-left: auto;
    font-size: 0.6rem;
    color: #71717a;
    background: rgba(63, 63, 70, 0.3);
    border-radius: 4px;
    min-width: 16px;
    height: 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 3px;
    line-height: 1;
    box-sizing: border-box;
  }

  .git-count-green {
    color: #22c55e;
    background: rgba(34, 197, 94, 0.1);
  }

  .git-section-files {
    padding: 0 2px 4px 6px;
  }

  /* File items */
  .git-file-item {
    display: flex !important;
    align-items: center;
    gap: 6px;
    padding: 3px 8px;
    border-radius: 3px;
    min-width: 0;
  }

  .git-file-item:hover {
    background: rgba(63, 63, 70, 0.15);
  }

  .git-file-icon {
    color: #52525b;
    flex-shrink: 0;
  }

  .git-file-path {
    color: #d4d4d8;
    flex: 1;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-family: var(--sl-font-mono) !important;
    font-size: 0.7rem;
  }

  .git-status-badge {
    font-size: 0.6rem;
    font-weight: 600;
    font-family: var(--sl-font-mono) !important;
    min-width: 16px;
    height: 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 3px;
    border-radius: 3px;
    flex-shrink: 0;
    line-height: 1;
    box-sizing: border-box;
  }

  .git-status-green {
    color: #22c55e;
    background: rgba(34, 197, 94, 0.15);
  }

  .git-status-yellow {
    color: #eab308;
    background: rgba(234, 179, 8, 0.15);
  }

  .git-status-blue {
    color: #3b82f6;
    background: rgba(59, 130, 246, 0.15);
  }

  .git-status-red {
    color: #ef4444;
    background: rgba(239, 68, 68, 0.15);
  }

  /* Hide commit messages on very narrow widths */
  @media (max-width: 400px) {
    .git-commit-msg {
      display: none;
    }
  }
</style>

<script>
  let typingInterval: ReturnType<typeof setInterval> | null = null
  let cursorInterval: ReturnType<typeof setInterval> | null = null

  function initTerminal() {
    const textElement = document.getElementById("terminal-text")
    const cursorElement = document.getElementById("terminal-cursor")
    const terminalContent = "edit <filepath> to..."

    if (!textElement || !cursorElement) return

    // Cleanup existing intervals
    if (typingInterval) clearInterval(typingInterval)
    if (cursorInterval) clearInterval(cursorInterval)

    // Reset content
    textElement.textContent = ""
    cursorElement.classList.remove("opacity-0")
    cursorElement.classList.add("opacity-100")

    // Typing animation
    let currentIndex = 0
    typingInterval = setInterval(() => {
      if (currentIndex <= terminalContent.length) {
        textElement.textContent = terminalContent.slice(0, currentIndex)
        currentIndex++
      } else {
        if (typingInterval) clearInterval(typingInterval)
      }
    }, 100)

    // Cursor blinking (toggle opacity)
    cursorInterval = setInterval(() => {
      cursorElement.classList.toggle("opacity-0")
      cursorElement.classList.toggle("opacity-100")
    }, 500)
  }

  function initTabs() {
    const tabs = document.querySelectorAll(".editor-tab")
    const contents = document.querySelectorAll(".tab-content")

    tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        const tabId = tab.getAttribute("data-tab")

        // Update active tab
        tabs.forEach((t) => t.classList.remove("active"))
        tab.classList.add("active")

        // Update visible content
        contents.forEach((content) => {
          if (content.getAttribute("data-content") === tabId) {
            content.classList.add("active")
          } else {
            content.classList.remove("active")
          }
        })
      })
    })
  }

  function initChecklist() {
    const checklistItems = document.querySelectorAll(".checklist-item")
    checklistItems.forEach((item) => {
      item.addEventListener("click", () => {
        item.classList.toggle("checked")
      })
    })
  }

  function initDockSwitcher() {
    const dockTabs = document.querySelectorAll(".dock-tab")
    const dockContents = document.querySelectorAll(".dock-content")
    const dockBadges = document.querySelectorAll(".dock-badges")

    dockTabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        const dockId = tab.getAttribute("data-dock")

        // update active tab
        dockTabs.forEach((t) => t.classList.remove("active"))
        tab.classList.add("active")

        // update visible content
        dockContents.forEach((content) => {
          if (content.getAttribute("data-dock-content") === dockId) {
            content.classList.add("active")
          } else {
            content.classList.remove("active")
          }
        })

        // update visible badges
        dockBadges.forEach((badges) => {
          if (badges.getAttribute("data-dock-badges") === dockId) {
            badges.classList.add("active")
          } else {
            badges.classList.remove("active")
          }
        })

        // handle terminal animation
        if (dockId !== "terminal") {
          // switching away from terminal ‚Äî clear animations
          if (typingInterval) clearInterval(typingInterval)
          if (cursorInterval) clearInterval(cursorInterval)
        } else {
          // switching back to terminal ‚Äî restart animation
          initTerminal()
        }
      })
    })
  }

  // Initialize on load
  initTerminal()
  initTabs()
  initChecklist()
  initDockSwitcher()

  // Re-initialize when navigating with View Transitions
  document.addEventListener("astro:page-load", () => {
    initTerminal()
    initTabs()
    initChecklist()
    initDockSwitcher()
  })
</script>
